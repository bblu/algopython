import matplotlib.pyplot as plt
import matplotlib.animation as animation

coordinates =[[119.185856,25.499614],[119.554187,26.151425],[119.594613,26.788843],[120.192046,26.967458],[120.227355,27.384046],[120.654447,27.829628],[120.780794,28.255816],[120.36065,29.084859],[119.870334,31.276697],[119.054375,31.687646],[118.88554,31.951734],[118.955683,32.349427],[118.740001,32.426897],[118.736501,32.86551],[118.206703,33.233141],[118.18406,33.6824],[118.38764,33.92451],[118.436931,34.373616],[118.207987,34.778031],[118.2522,35.40928],[117.798096,35.776917],[117.727229,36.139753],[117.956009,36.861404],[117.904512,37.51927],[117.379609,38.253171],[117.071045,39.410054],[116.518431,39.782019],[116.918061,39.48116],[116.920948,39.111238],[117.183259,38.974008],[117.381524,38.24855],[117.903319,37.522277],[117.955835,36.861417],[117.727079,36.139736],[117.794047,35.77734],[118.25303,35.40658],[118.264822,34.54441],[119.127082,33.689558],[119.622621,32.420818],[120.213091,32.127778],[120.328912,31.632624],[120.645532,31.345832],[120.87196,29.3],[121.225953,29.046703],[121.22168,28.410491],[120.254577,27.432289],[120.191264,26.966796],[119.595078,26.789901],[119.553386,26.150241]]

##http://localhost:5000/trip/v1/profile/116.518369,39.747885;116.517563,38.757803;117.517563,39.757803?steps=false&geometries=geojson
#coordinates = [[117.518163,39.759421],[117.412433,39.748262],[117.397429,39.764358],[117.365413,39.742839],[117.329456,39.760575],[117.261546,39.776815],[117.15299,39.785433],[117.048331,39.781503],[116.96912,39.798939],[116.80154,39.802166],[116.677753,39.839658],[116.626442,39.796686],[116.5999,39.760207],[116.515215,39.739171],[116.518369,39.747885],[116.513592,39.737419],[116.56308,39.751178],[116.68176,39.65039],[116.693501,39.517514],[116.693851,39.480181],[116.64814,39.447906],[116.588887,39.383005],[116.546157,39.355664],[116.599573,39.311588],[116.601261,39.223416],[116.563048,39.092816],[116.564002,39.008757],[116.532121,38.972157],[116.506422,38.9025],[116.506991,38.851953],[116.547059,38.789831],[116.55385,38.759278],[116.562497,38.698214],[116.550867,38.781342],[116.505316,38.863464],[116.50756,38.908551],[116.531026,38.969171],[116.564163,39.008725],[116.563908,39.091744],[116.751026,39.131308],[116.813895,39.133623],[116.914564,39.175539],[116.911155,39.200848],[116.935803,39.274299],[117.074884,39.29489],[117.205486,39.343006],[117.32686,39.340101],[117.382133,39.401736],[117.392063,39.429075],[117.32868,39.61696],[117.330945,39.643803],[117.388043,39.720645],[117.391937,39.765376],[117.412433,39.748262]]
##http://localhost:5000/route/v1/profile/116.518369,39.747885;117.517563,39.757803?steps=false&geometries=geojson
#coordinates = [[116.518369,39.747885],[116.51277,39.748861],[116.513592,39.737419],[116.599977,39.760108],[116.6274,39.797409],[116.680042,39.836615],[116.712915,39.832476],[116.803925,39.801707],[116.967698,39.798909],[117.008217,39.794034],[117.048292,39.781258],[117.152999,39.785285],[117.216608,39.777311],[117.261528,39.776647],[117.329403,39.760443],[117.365525,39.742699],[117.397508,39.764246],[117.409471,39.756229],[117.412433,39.748262],[117.518163,39.759421]]

xa=[]
ya=[]
print len(coordinates)
for x,y in coordinates:
    xa.append(x)
    ya.append(y)
#minx = min(xa)*0.9999
#maxx = max(xa)*1.0001
#miny = min(ya)*0.9999
#maxy = max(ya)*1.0001

def data_gen(t=0):
    for x,y in coordinates:
        t+=0.5
        yield t, x, y

def init():
    #ax.set_ylim(miny, maxy)
    #ax.set_xlim(minx, maxx)
    del xdata[:]
    del ydata[:]
    line.set_data(xdata, ydata)
    return line,

fig, ax = plt.subplots()
line, = ax.plot([], [], lw=2)
ax.grid()
xdata, ydata = [], []

def run(data):
    # update the data
    t, x, y = data
    xdata.append(x)
    ydata.append(y)
    xmin, xmax = ax.get_xlim()

    if t >= xmax:
        ax.set_xlim(xmin, 2*xmax)
        ax.figure.canvas.draw()
    line.set_data(xdata, ydata)

    return line,

ani = animation.FuncAnimation(fig, run, data_gen, blit=False, interval=200,
                              repeat=True, init_func=init)

mark='or'
plt.plot(116.518369,39.747885,mark)
plt.plot(116.517563,38.757803,mark)
plt.plot(117.517563,39.757803,mark)
linestring, = plt.plot( xa,ya )
plt.show()
